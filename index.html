<!DOCTYPE html>
<html lang="en">

<head>
    <style>
        /* button[disabled] {
            background-color: grey;
        } */
        body {
            background-color: lightgrey;
        }

        /* 
        li {
            background-color: white;
        } */
    </style>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Sky's Web Foundations Project</title>
</head>

<body>
    <div>
        <div style='display:flex'>
            <div style='flex:1'>
                <h1>Left</h1>
                <div id='left'>
                </div>
            </div>
            <div style='flex:1'>
                <h1>Center</h1>
                <div id='center'>
                </div>
            </div>
            <div style='flex:1'>
                <h1>Right</h1>
                <div id='right'>
                </div>
            </div>
        </div>

        <div style='display:flex'>
            <h2>Moe:</h2>
            <div id="square" style='flex:1'>
                Square
            </div>
            <h2>Larry:</h2>
            <div id="square2" style='flex:1'>
                Square2
            </div>
            <h2>Curly:</h2>
            <div id="square3" style='flex:1'>
                Square3
            </div>
        </div>
    </div>
    <script>
        const data = {
            customers: {
                Moe: {
                    Foo: 0,
                    Bar: 0,
                    Bazz: 0
                },
                Larry: {
                    Foo: 0,
                    Bar: 0,
                    Bazz: 0
                },
                Curly: {
                    Foo: 0,
                    Bar: 0,
                    Bazz: 0
                }
            },
            prizes: {
                Foo: 1,
                Bar: 3,
                Bazz: 5
            }
        };
        const left = document.querySelector('#left');
        const right = document.querySelector('#right');
        const center = document.querySelector('#center');

        const handler = (evt) => {
            if (evt.target.tagName === 'BUTTON') {
                data[evt.target.innerHTML] = data[evt.target.innerHTML] === 'LEFT' ? 'RIGHT' : 'LEFT';
                render();
            }
        };

        left.addEventListener('click', handler);
        right.addEventListener('click', handler);
        center.addEventListener('click', handler);

        const renderSection = (side, div) => {
            //console.log(Object.values(data.prizes));
            const html = `
        <ul>
            ${
            Object.entries(data.prizes).map( key => `<li><button ${ data[key] !== side ? 'disabled' : '' }>${ key.join(': ') }</button></li>
            `).join('')
            }
        </ul>
        `;
            // console.log(html);
            div.innerHTML = html;
        };

        const render = () => {
            renderSection('LEFT', left);
            renderSection('CENTER', center);
            renderSection('RIGHT', right);
        };
        render();

        //-----inc and dec---------------------------------------------------

        const template = (data) => `
            <div>
                Foo: ${(data.customers.Moe.Foo)}
                <br />
                <button data-action='dec'>-</button>
                <button data-action='inc'>+</button>
            </div>
            <div>
                Bar: ${(data.customers.Moe.Bar)}
                <br />
                <button data-action2='dec'>-</button>
                <button data-action2='inc'>+</button>
            </div>
            <div>
                Bazz: ${(data.customers.Moe.Bazz)}
                <br />
                <button data-action3='dec'>-</button>
                <button data-action3='inc'>+</button>
            </div>
            `;
        const template2 = (data) => `
            <div>
                ${(data.customers.Larry.Foo)}
                <br />
                <button data-action='dec'>-</button>
                <button data-action='inc'>+</button>
            </div>
            <div>
                ${(data.customers.Larry.Bar)}
                <br />
                <button data-action2='dec'>-</button>
                <button data-action2='inc'>+</button>
            </div>
            <div>
                ${(data.customers.Larry.Bazz)}
                <br />
                <button data-action3='dec'>-</button>
                <button data-action3='inc'>+</button>
            </div>
            `;
        const template3 = (data) => `
            <div>
                ${(data.customers.Curly.Foo)}
                <br />
                <button data-action='dec'>-</button>
                <button data-action='inc'>+</button>
            </div>
            <div>
                ${(data.customers.Curly.Bar)}
                <br />
                <button data-action2='dec'>-</button>
                <button data-action2='inc'>+</button>
            </div>
            <div>
                ${(data.customers.Curly.Bazz)}
                <br />
                <button data-action3='dec'>-</button>
                <button data-action3='inc'>+</button>
            </div>
            `;
        const div = document.querySelector('#square');
        const div2 = document.querySelector('#square2');
        const div3 = document.querySelector('#square3');

        const renderSq = () => {
            div.innerHTML = template(data);
        }
        const renderSq2 = () => {
            div2.innerHTML = template2(data);
        }
        const renderSq3 = () => {
            div3.innerHTML = template3(data);
        }
        render();

        const renderSquares = () => {
            renderSq();
            renderSq2();
            renderSq3();
        };
        renderSquares();

        div.addEventListener('click', (ev) => {
            const action = ev.target.getAttribute('data-action');
            const action2 = ev.target.getAttribute('data-action2');
            const action3 = ev.target.getAttribute('data-action3');
            //Moe, Foo
            if (action === 'dec' && data.customers.Moe.Foo > 0) {
                data.customers.Moe.Foo--;
                data.prizes.Foo++;
            }
            if (action === 'inc' && data.prizes.Foo > 0) {
                data.prizes.Foo--;
                data.customers.Moe.Foo++;
            }
            //bar
            if (action2 === 'dec' && data.customers.Moe.Bar > 0) {
                data.customers.Moe.Bar--;
                data.prizes.Bar++;
            }
            if (action2 === 'inc' && data.prizes.Bar > 0) {
                data.prizes.Bar--;
                data.customers.Moe.Bar++;
            }
            //bazz
            if (action3 === 'dec' && data.customers.Moe.Bazz > 0) {
                data.customers.Moe.Bazz--;
                data.prizes.Bazz++;
            }
            if (action3 === 'inc' && data.prizes.Bazz > 0) {
                data.prizes.Bazz--;
                data.customers.Moe.Bazz++;
            }
            render();
            renderSquares();
        });
        div2.addEventListener('click', (ev) => {
            const action = ev.target.getAttribute('data-action');
            const action2 = ev.target.getAttribute('data-action2');
            const action3 = ev.target.getAttribute('data-action3');
            if (action === 'dec' && data.customers.Larry.Foo > 0) {
                data.customers.Larry.Foo--;
                data.prizes.Foo++;

            }
            if (action === 'inc' && data.prizes.Foo > 0) {
                data.prizes.Foo--;
                data.customers.Larry.Foo++;

            }
            //bar
            if (action2 === 'dec' && data.customers.Larry.Bar > 0) {
                data.customers.Larry.Bar--;
                data.prizes.Bar++;
            }
            if (action2 === 'inc' && data.prizes.Bar > 0) {
                data.prizes.Bar--;
                data.customers.Larry.Bar++;
                console.log(data.customers.Larry.Bar);

            }
            //bazz
            if (action3 === 'dec' && data.customers.Larry.Bazz > 0) {
                data.customers.Larry.Bazz--;
                data.prizes.Bazz++;
            }
            if (action3 === 'inc' && data.prizes.Bazz > 0) {
                data.prizes.Bazz--;
                data.customers.Larry.Bazz++;
            }

            render();
            renderSquares();
        });
        div3.addEventListener('click', (ev) => {
            const action = ev.target.getAttribute('data-action');
            const action2 = ev.target.getAttribute('data-action2');
            const action3 = ev.target.getAttribute('data-action3');
            if (action === 'dec' && data.customers.Curly.Foo > 0) {
                data.customers.Curly.Foo--;
                data.prizes.Foo++;
            }
            if (action === 'inc' && data.prizes.Foo > 0) {
                data.prizes.Foo--;
                data.customers.Curly.Foo++;
            }
            //bar
            if (action2 === 'dec' && data.customers.Curly.Bar > 0) {
                data.customers.Curly.Bar--;
                data.prizes.Bar++;
            }
            if (action2 === 'inc' && data.prizes.Bar > 0) {
                data.prizes.Bar--;
                data.customers.Curly.Bar++;
                console.log(data.customers.Curly.Bar);

            }
            //bazz
            if (action3 === 'dec' && data.customers.Curly.Bazz > 0) {
                data.customers.Curly.Bazz--;
                data.prizes.Bazz++;
            }
            if (action3 === 'inc' && data.prizes.Bazz > 0) {
                data.prizes.Bazz--;
                data.customers.Curly.Bazz++;
            }
            render();
            renderSquares();
        });


        // const renderItem = (key, side) => {
        //     return `
        //     <ul>
        //        <li><button data-key='${key}' ${data[key] !== side ? 'disabled' : ''}>${key}
        //             </button></li>
        //             `;
        // };
        // const listener = (ev) => {
        //     if (ev.target.tagName === 'BUTTON') {
        //         const key = ev.target.getAttribute('data-key');
        //         data[key] = data[key] === 'LEFT' ? 'RIGHT' : 'LEFT';
        //         render();
        //     }
        // };
    </script>
</body>

</html>